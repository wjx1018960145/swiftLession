(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-680897da"],{"23c8":function(e,t,n){"use strict";var i=n("3184"),a=n.n(i);a.a},2464:function(e,t,n){var i=n("95df");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("499e").default;a("1d5e4436",i,!0,{sourceMap:!1,shadowMode:!1})},3184:function(e,t,n){var i=n("988e");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("499e").default;a("7c52d70d",i,!0,{sourceMap:!1,shadowMode:!1})},"417e":function(e,t,n){"use strict";var i=n("d282"),a=n("ad06"),r=n("8bbf"),o=n.n(r);function s(e){var t=[];function n(e){e.forEach((function(e){t.push(e),e.children&&n(e.children)}))}return n(e),t}function c(e,t){var n,i;void 0===t&&(t={});var a=t.indexKey||"index";return o.a.extend({inject:(n={},n[e]={default:null},n),computed:(i={parent:function(){return this.disableBindRelation?null:this[e]}},i[a]=function(){return this.bindRelation(),this.parent.children.indexOf(this)},i),mounted:function(){this.bindRelation()},beforeDestroy:function(){var e=this;this.parent&&(this.parent.children=this.parent.children.filter((function(t){return t!==e})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var e=[].concat(this.parent.children,[this]),t=s(this.parent.slots());e.sort((function(e,n){return t.indexOf(e.$vnode)-t.indexOf(n.$vnode)})),this.parent.children=e}}}})}var l=n("ea8e"),u=function(e){var t=e.parent,n=e.bem,i=e.role;return{mixins:[c(t)],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"},bindGroup:{type:Boolean,default:!0}},computed:{disableBindRelation:function(){return!this.bindGroup},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},iconStyle:function(){var e=this.checkedColor||this.parent&&this.parent.checkedColor;if(e&&this.checked&&!this.isDisabled)return{borderColor:e,backgroundColor:e}},tabindex:function(){return this.isDisabled||"radio"===i&&!this.checked?-1:0}},methods:{onClick:function(e){var t=this.$refs.label,n=e.target,i=t&&(t===n||t.contains(n));this.isDisabled||i&&this.labelDisabled||this.toggle(),this.$emit("click",e)}},render:function(){var e=arguments[0],t=this.slots,r=this.checked,o=t("icon",{checked:r})||e(a["a"],{attrs:{name:"success"},style:this.iconStyle}),s=t()&&e("span",{ref:"label",class:n("label",[this.labelPosition,{disabled:this.isDisabled}])},[t()]),c=this.iconSize||this.parent&&this.parent.iconSize,u=[e("div",{class:n("icon",[this.shape,{disabled:this.isDisabled,checked:r}]),style:{fontSize:Object(l["a"])(c)}},[o])];return"left"===this.labelPosition?u.unshift(s):u.push(s),e("div",{attrs:{role:i,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:n(),on:{click:this.onClick}},[u])}}},d=Object(i["a"])("checkbox"),h=d[0],m=d[1];t["a"]=h({mixins:[u({bem:m,role:"checkbox",parent:"vanCheckbox"})],computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(e){this.parent?this.setParentValue(e):this.$emit("input",e)}}},watch:{value:function(e){this.$emit("change",e)}},methods:{toggle:function(e){var t=this;void 0===e&&(e=!this.checked),clearTimeout(this.toggleTask),this.toggleTask=setTimeout((function(){t.checked=e}))},setParentValue:function(e){var t=this.parent,n=t.value.slice();if(e){if(t.max&&n.length>=t.max)return;-1===n.indexOf(this.name)&&(n.push(this.name),t.$emit("input",n))}else{var i=n.indexOf(this.name);-1!==i&&(n.splice(i,1),t.$emit("input",n))}}}})},"95df":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".van-checkbox{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;overflow:hidden;-webkit-user-select:none;user-select:none}.van-checkbox__icon{-webkit-box-flex:0;-webkit-flex:none;flex:none;height:1em;font-size:5.333vw;line-height:1em}.van-checkbox__icon .van-icon{display:block;box-sizing:border-box;width:1.25em;height:1.25em;color:transparent;font-size:.8em;line-height:inherit;text-align:center;border:1px solid #e5e5e5;-webkit-transition-duration:.2s;transition-duration:.2s;-webkit-transition-property:color,border-color,background-color;transition-property:color,border-color,background-color}.van-checkbox__icon--round .van-icon{border-radius:100%}.van-checkbox__icon--checked .van-icon{color:#fff;background-color:#1989fa;border-color:#1989fa}.van-checkbox__icon--disabled .van-icon{background-color:#ebedf0;border-color:#c8c9cc}.van-checkbox__icon--disabled.van-checkbox__icon--checked .van-icon{color:#c8c9cc}.van-checkbox__label{margin-left:2.133vw;color:#323233;line-height:5.333vw}.van-checkbox__label--left{margin:0 2.133vw 0 0}.van-checkbox__label--disabled{color:#c8c9cc}",""])},9753:function(e,t,n){"use strict";n("3cd0"),n("5cc2"),n("2464")},"988e":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".note__create-form[data-v-1b71d268]{margin-top:5.333vw}.note__create-form--metion[data-v-1b71d268]{float:right;margin:4.267vw 4.267vw 0 0;font-size:3.2vw;color:#1989fa}",""])},d0c4:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout__page"},[n("div",{staticClass:"layout__header"},[n("van-nav-bar",{attrs:{title:e.isEdit?"编辑任务":"新建任务","right-text":e.isEdit?"删除":"","left-arrow":""},on:{"click-left":e.handleClickLeft,"click-right":e.confirmDeleteNote}})],1),n("div",{directives:[{name:"touch",rawName:"v-touch:swipe",value:e.handleSwipeRight,expression:"handleSwipeRight",arg:"swipe"}],staticClass:"layout__body"},[n("van-cell-group",{staticClass:"note__create-form"},[n("van-field",{attrs:{label:"任务名称",placeholder:"请输入任务名称",maxlength:"16",required:""},model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}}),n("van-cell",{attrs:{title:"截止时间",value:e.deadlineText,"is-link":""},on:{click:function(t){return e.setSelectDeadlineShow(!0)}}}),n("van-cell",{attrs:{title:"同步任务到手机日历"},on:{click:e.toggleSyncCalendar}},[n("van-checkbox",{attrs:{slot:"right-icon",disabled:!e.formModel.deadline},slot:"right-icon",model:{value:e.formModel.isSync,callback:function(t){e.$set(e.formModel,"isSync",t)},expression:"formModel.isSync"}})],1),n("van-field",{attrs:{label:"备注",type:"textarea",placeholder:"请输入备注",maxlength:"50"},model:{value:e.formModel.remark,callback:function(t){e.$set(e.formModel,"remark",t)},expression:"formModel.remark"}})],1),n("span",{staticClass:"note__create-form--metion extend-click",on:{click:e.handleMentionClick}},[e._v("每日名言（演示接口缓存效果）")]),n("div",{staticClass:"bottom-button--submit",attrs:{id:"fixed-bottom"}},[n("van-button",{attrs:{type:"primary",size:"large"},on:{click:e.handleCreateNote}},[e._v("提交")])],1)],1),n("van-popup",{attrs:{position:"bottom"},model:{value:e.selectDeadlineShow,callback:function(t){e.selectDeadlineShow=t},expression:"selectDeadlineShow"}},[n("van-datetime-picker",{attrs:{title:"选择截止时间",type:"datetime",formatter:e.dateTimePickerFormatter,"min-date":e.minDate},on:{cancel:function(t){return e.setSelectDeadlineShow(!1)},confirm:e.handleTimePickerConfirm},model:{value:e.formModel.deadline,callback:function(t){e.$set(e.formModel,"deadline",t)},expression:"formModel.deadline"}})],1),n("transition",[n("router-view",{staticClass:"above-loaded-page"})],1)],1)},a=[],r=(n("7f7f"),n("96cf"),n("3b8d")),o=(n("47e2"),n("2241")),s=n("d225"),c=n("b0b4"),l=n("308d"),u=n("6bb5"),d=n("4e2b"),h=(n("da02"),n("6b41")),m=(n("c625"),n("b650")),f=(n("9eda"),n("565f")),p=(n("2a53"),n("34e9")),b=(n("3ec1"),n("7744")),v=(n("87d0"),n("e41f")),g=(n("3cd0"),n("f8c2"),n("c31d")),k=n("d282"),x=n("68ed"),y=n("482d"),w=n("90c6");function D(e,t){var n=-1,i=Array(e);while(++n<e)i[n]=t(n);return i}function M(e){if(e){while(Object(w["a"])(parseInt(e,10))){if(!(e.length>1))return;e=e.slice(1)}return parseInt(e,10)}}function O(e,t){return 32-new Date(e,t-1,32).getDate()}var C=n("1b10"),j=n("f253"),$=Object(g["a"])({},C["a"],{value:null,filter:Function,showToolbar:{type:Boolean,default:!0},formatter:{type:Function,default:function(e,t){return t}}}),_={data:function(){return{innerValue:this.formatValue(this.value)}},computed:{originColumns:function(){var e=this;return this.ranges.map((function(t){var n=t.type,i=t.range,a=D(i[1]-i[0]+1,(function(e){var t=Object(x["b"])(i[0]+e);return t}));return e.filter&&(a=e.filter(n,a)),{type:n,values:a}}))},columns:function(){var e=this;return this.originColumns.map((function(t){return{values:t.values.map((function(n){return e.formatter(t.type,n)}))}}))}},watch:{columns:"updateColumnValue",innerValue:function(e){this.$emit("input",e)}},mounted:function(){var e=this;this.updateColumnValue(),this.$nextTick((function(){e.updateInnerValue()}))},methods:{onConfirm:function(){this.$emit("confirm",this.innerValue)},onCancel:function(){this.$emit("cancel")}},render:function(){var e=this,t=arguments[0],n={};return Object.keys(C["a"]).forEach((function(t){n[t]=e[t]})),t(j["a"],{ref:"picker",attrs:{columns:this.columns},on:{change:this.onChange,confirm:this.onConfirm,cancel:this.onCancel},props:Object(g["a"])({},n)})}},V=Object(k["a"])("time-picker"),S=V[0],N=S({mixins:[_],props:Object(g["a"])({},$,{minHour:{type:Number,default:0},maxHour:{type:Number,default:23},minMinute:{type:Number,default:0},maxMinute:{type:Number,default:59}}),computed:{ranges:function(){return[{type:"hour",range:[this.minHour,this.maxHour]},{type:"minute",range:[this.minMinute,this.maxMinute]}]}},watch:{filter:"updateInnerValue",minHour:"updateInnerValue",maxHour:"updateInnerValue",minMinute:"updateInnerValue",maxMinute:"updateInnerValue",value:function(e){e=this.formatValue(e),e!==this.innerValue&&(this.innerValue=e,this.updateColumnValue(e))}},methods:{formatValue:function(e){e||(e=Object(x["b"])(this.minHour)+":"+Object(x["b"])(this.minMinute));var t=e.split(":"),n=t[0],i=t[1];return n=Object(x["b"])(Object(y["a"])(n,this.minHour,this.maxHour)),i=Object(x["b"])(Object(y["a"])(i,this.minMinute,this.maxMinute)),n+":"+i},updateInnerValue:function(){var e=this.$refs.picker.getIndexes(),t=this.originColumns[0].values[e[0]],n=this.originColumns[1].values[e[1]],i=t+":"+n;this.innerValue=this.formatValue(i)},onChange:function(e){var t=this;this.updateInnerValue(),this.$nextTick((function(){t.$nextTick((function(){t.$emit("change",e)}))}))},updateColumnValue:function(){var e=this,t=this.formatter,n=this.innerValue.split(":"),i=[t("hour",n[0]),t("minute",n[1])];this.$nextTick((function(){e.$refs.picker.setValues(i)}))}}});function I(e){return"[object Date]"===Object.prototype.toString.call(e)&&!Object(w["a"])(e.getTime())}var T=(new Date).getFullYear(),H=Object(k["a"])("date-picker"),Y=H[0],R=Y({mixins:[_],props:Object(g["a"])({},$,{type:{type:String,default:"datetime"},minDate:{type:Date,default:function(){return new Date(T-10,0,1)},validator:I},maxDate:{type:Date,default:function(){return new Date(T+10,11,31)},validator:I}}),watch:{filter:"updateInnerValue",minDate:"updateInnerValue",maxDate:"updateInnerValue",value:function(e){e=this.formatValue(e),e.valueOf()!==this.innerValue.valueOf()&&(this.innerValue=e)}},computed:{ranges:function(){var e=this.getBoundary("max",this.innerValue),t=e.maxYear,n=e.maxDate,i=e.maxMonth,a=e.maxHour,r=e.maxMinute,o=this.getBoundary("min",this.innerValue),s=o.minYear,c=o.minDate,l=o.minMonth,u=o.minHour,d=o.minMinute,h=[{type:"year",range:[s,t]},{type:"month",range:[l,i]},{type:"day",range:[c,n]},{type:"hour",range:[u,a]},{type:"minute",range:[d,r]}];return"date"===this.type&&h.splice(3,2),"year-month"===this.type&&h.splice(2,3),h}},methods:{formatValue:function(e){return I(e)||(e=this.minDate),e=Math.max(e,this.minDate.getTime()),e=Math.min(e,this.maxDate.getTime()),new Date(e)},getBoundary:function(e,t){var n,i=this[e+"Date"],a=i.getFullYear(),r=1,o=1,s=0,c=0;return"max"===e&&(r=12,o=O(t.getFullYear(),t.getMonth()+1),s=23,c=59),t.getFullYear()===a&&(r=i.getMonth()+1,t.getMonth()+1===r&&(o=i.getDate(),t.getDate()===o&&(s=i.getHours(),t.getHours()===s&&(c=i.getMinutes())))),n={},n[e+"Year"]=a,n[e+"Month"]=r,n[e+"Date"]=o,n[e+"Hour"]=s,n[e+"Minute"]=c,n},updateInnerValue:function(){var e,t=this,n=this.$refs.picker.getIndexes(),i=function(e){return M(t.originColumns[e].values[n[e]])},a=i(0),r=i(1),o=O(a,r);e="year-month"===this.type?1:i(2),e=e>o?o:e;var s=0,c=0;"datetime"===this.type&&(s=i(3),c=i(4));var l=new Date(a,r-1,e,s,c);this.innerValue=this.formatValue(l)},onChange:function(e){var t=this;this.updateInnerValue(),this.$nextTick((function(){t.$nextTick((function(){t.$emit("change",e)}))}))},updateColumnValue:function(){var e=this,t=this.innerValue,n=this.formatter,i=[n("year",""+t.getFullYear()),n("month",Object(x["b"])(t.getMonth()+1)),n("day",Object(x["b"])(t.getDate()))];"datetime"===this.type&&i.push(n("hour",Object(x["b"])(t.getHours())),n("minute",Object(x["b"])(t.getMinutes()))),"year-month"===this.type&&(i=i.slice(0,2)),this.$nextTick((function(){e.$refs.picker.setValues(i)}))}}}),z=Object(k["a"])("datetime-picker"),B=z[0],F=z[1],P=B({props:Object(g["a"])({},N.props,{},R.props),render:function(){var e=arguments[0],t="time"===this.type?N:R;return e(t,{class:F(),props:Object(g["a"])({},this.$props),on:Object(g["a"])({},this.$listeners)})}}),E=(n("9753"),n("417e")),q=n("9ab4"),G=n("60a3"),J=n("c32d"),L=n.n(J),A=n("75fb"),K=n("db18"),Q=n("5339"),U=n("2255");G["d"].use(h["a"]).use(m["a"]).use(f["a"]).use(p["a"]).use(b["a"]).use(v["a"]).use(P).use(E["a"]);var W=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.dateTimePickerFormatter=U["b"],e.selectDeadlineShow=!1,e.minDate=new Date,e.formModel={id:Object(U["a"])(20),name:"",deadline:void 0,isSync:!1,isDone:!1,remark:""},e.deadlineText="",e.rules={name:[{required:!0,message:"请填写任务名称"}]},e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"handleClickLeft",value:function(){this.$router.go(-1)}},{key:"setSelectDeadlineShow",value:function(e){this.selectDeadlineShow=e}},{key:"handleMentionClick",value:function(){this.$router.push({name:"quote"})}},{key:"handleTimePickerConfirm",value:function(){this.deadlineText=L()(this.formModel.deadline).format("YYYY-MM-DD HH:mm:ss"),this.setSelectDeadlineShow(!1)}},{key:"toggleSyncCalendar",value:function(){if(!this.formModel.deadline)return this.$toast({message:"请先选择截止日期"});this.formModel.isSync=!this.formModel.isSync}},{key:"confirmDeleteNote",value:function(){var e=this;o["a"].alert({title:"删除确认",message:"是否删除该任务?"}).then((function(){e.handleDeleteNote(e.notebookId,e.id)}))}},{key:"handleDeleteNote",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q["b"].deleteNote(t,n);case 3:this.$bus.emit("notebook-change"),this.$router.go(-1),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),window.$sentry.log({error:e.t0,fileName:"/var/jenkins_home/workspace/mobile-web-best-practice/src/views/note/create/index.vue",lineNo:80,scope:"NoteCreate -> value -> _handleDeleteNote"}),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"handleCreateNote",value:function(){var e=this;this.validator.validate().then(Object(r["a"])(regeneratorRuntime.mark((function t(){var n,i,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=e.formModel,i=e.notebookId,a=e.isEdit,t.next=4,Q["b"].saveNote(n,i,a);case 4:if(!n.isSync||!n.deadline){t.next=8;break}return r={id:n.id,title:n.name,deadline:n.deadline.getTime(),alarm:[5]},t.next=8,Q["b"].syncCalendar(r,i);case 8:e.$bus.emit("notebook-change"),e.$router.go(-1),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),window.$sentry.log({error:t.t0,fileName:"/var/jenkins_home/workspace/mobile-web-best-practice/src/views/note/create/index.vue",lineNo:93,scope:"NoteCreate -> value"}),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))).catch((function(t){e.$toast(t[0].message)}))}},{key:"created",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isEdit){e.next=12;break}return e.prev=1,e.next=4,Q["b"].getNote(this.notebookId,this.id);case 4:t=e.sent,t&&(this.formModel={id:t.id,name:t.name,deadline:t.deadline,isDone:t.isDone,isSync:t.isSync,remark:t.remark},this.formModel.deadline&&(this.deadlineText=L()(this.formModel.deadline).format("YYYY-MM-DD HH:mm:ss"))),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),window.$sentry.log({error:e.t0,fileName:"/var/jenkins_home/workspace/mobile-web-best-practice/src/views/note/create/index.vue",lineNo:118,scope:"NoteCreate -> value -> _created"}),console.log(e.t0);case 12:this.validator=new A["a"]({rules:this.rules,data:this.formModel});case 13:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"id",get:function(){if("string"===typeof this.$route.query.id)return parseInt(this.$route.query.id,10)}},{key:"notebookId",get:function(){return parseInt(this.$route.query.notebookId,10)}},{key:"isEdit",get:function(){return!!this.id}}]),t}(Object(G["b"])(K["a"]));W=Object(q["b"])([Object(G["a"])({components:{}})],W);var X=W,Z=X,ee=(n("23c8"),n("2877")),te=Object(ee["a"])(Z,i,a,!1,null,"1b71d268",null);t["default"]=te.exports}}]);
//# sourceMappingURL=chunk-680897da.039269dd.js.map